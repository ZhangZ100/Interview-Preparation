# MySQL大表怎么DDL变更

**前言**

![image-20220119142145668](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119142145668.png)

![image-20220119142249561](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119142249561.png)

![image-20220119142351503](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119142351503.png)

![image-20220119142530119](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119142530119.png)

![image-20220119142652097](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119142652097.png)

![image-20220119142851989](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119142851989.png)



![image-20220119143031521](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119143031521.png)

![image-20220119143049663](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119143049663.png)







![image-20220119143227630](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119143227630.png)

![image-20220119143245443](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119143245443.png)

![image-20220119143307461](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119143307461.png)

![image-20220119143341857](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119143341857.png)

![image-20220119143436490](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119143436490.png)





# MySQL主从复制

![image-20220119143554873](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119143554873.png)

![image-20220119143620397](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119143620397.png)

按照文章搭建mysql-master

![image-20220119144134641](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119144134641.png)

编写配置文件，重启mysql，登录链接mysql客户端

![image-20220119144635328](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119144635328.png)

创建数据同步用户

![image-20220119144727880](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119144727880.png)



创建从实例

![image-20220119144838228](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119144838228.png)



![image-20220119150320214](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119150320214.png)



我的服务器出问题了，太慢了，所以没往后复现了。

其中可能出现 show master status为空的问题，这应该是my.conf没起作用，百度后

![image-20220119150503489](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119150503489.png)



后面服务器好了，配置文件也检查过了。

还是 show master status 时得到empty set

配置文件已经开启二进制日志了。。。











# MySQL查询缓存

![image-20220119192812093](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119192812093.png)

![image-20220119192831469](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119192831469.png)

![image-20220119192917400](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119192917400.png)



![image-20220119192941338](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119192941338.png)

![image-20220119193027001](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193027001.png)



![image-20220119193040939](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193040939.png)

![image-20220119193150672](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193150672.png)



![image-20220119193228761](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193228761.png)



![image-20220119193245772](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193245772.png)

![image-20220119193258295](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193258295.png)

![image-20220119193321646](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193321646.png)



![image-20220119193333598](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193333598.png)



![image-20220119193347065](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193347065.png)

![image-20220119193409362](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193409362.png)

![image-20220119193456757](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193456757.png)

![image-20220119193553576](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193553576.png)



![image-20220119193608184](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193608184.png)



![image-20220119193635087](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193635087.png)

![image-20220119193656651](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193656651.png)

![image-20220119193723366](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193723366.png)

![image-20220119193817609](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193817609.png)



# InnoDB存储引擎的设计

![image-20220119193934921](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119193934921.png)



![image-20220119194000146](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194000146.png)

![image-20220119194042904](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194042904.png)



## 内存

![image-20220119194119705](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194119705.png)

![image-20220119194133975](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194133975.png)

![image-20220119194239504](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194239504.png)



![image-20220119194320653](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194320653.png)



![image-20220119194438517](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194438517.png)

![image-20220119194554222](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194554222.png)



![image-20220119194617936](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194617936.png)

## 磁盘

![image-20220119194737888](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194737888.png)

![image-20220119194820172](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194820172.png)

![image-20220119194847293](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119194847293.png)





# 模糊匹配like %%优化

![image-20220119195113778](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220119195113778.png)

![image-20220120140532439](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120140532439.png)



![image-20220120140601861](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120140601861.png)



![image-20220120140623596](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120140623596.png)

![image-20220120140646163](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120140646163.png)



![image-20220120140734592](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120140734592.png)

![image-20220120140816195](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120140816195.png)



![image-20220120140910111](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120140910111.png)



![image-20220120140946454](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120140946454.png)

![image-20220120141037591](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141037591.png)

![image-20220120141153111](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141153111.png)

![image-20220120141203809](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141203809.png)

![image-20220120141220204](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141220204.png)

![image-20220120141505567](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141505567.png)

![image-20220120141611217](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141611217.png)

![image-20220120141618325](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141618325.png)



![image-20220120141630272](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141630272.png)

![image-20220120141658689](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141658689.png)

![image-20220120141717612](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141717612.png)



![image-20220120141731687](MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.assets/image-20220120141731687.png)















# 来源，链接

来自敖丙

https://mp.weixin.qq.com/s/pinOFeF09orQCnIp4L6XyA

https://mp.weixin.qq.com/s/eEWMSTAUF1H-gFBx26jujw

https://mp.weixin.qq.com/s/LZBctWNWi3qehb-dgUCmxQ

like%%优化

https://mp.weixin.qq.com/s/ygvuP35B_sJAlBHuuEJhfg