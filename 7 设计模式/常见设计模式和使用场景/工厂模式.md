## 分类

工厂模式主要可以分为3大类：

- 简单工厂模式
- 工厂方法模式
- 抽象工厂模式



### 简单工厂模式

![image-20220116132852367](%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.assets/image-20220116132852367.png)



**几种实现方式**

![image-20220116133002543](%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.assets/image-20220116133002543.png)

![image-20220116133029411](%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.assets/image-20220116133029411.png)

![image-20220116133245877](%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.assets/image-20220116133245877.png)



![image-20220116133336176](%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.assets/image-20220116133336176.png)

可以看到，反射是通过存 Type对应的类，然后新增Type的时候只需要新增方法，而不需要像以前一项修改方法。

通过获取到的class.newInstance()，再强制转化即可得到所需的实例。



或者说用type强制转换，则只需要一个方法。

~~~java
Class prodClass=map.get(type);
return (type)prodClass.new Instance();
~~~



反射可能在性能需求高以及特殊场景下不适用，所以也可以在Map中存对象的实例。



### 工厂方法模式

![image-20220116134253440](%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.assets/image-20220116134253440.png)

![image-20220116145420218](%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.assets/image-20220116145420218.png)

### 抽象工厂模式

![image-20220116145651612](%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.assets/image-20220116145651612.png)

![image-20220116145722203](%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.assets/image-20220116145722203.png)

## 总结

![image-20220116150017104](%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.assets/image-20220116150017104.png)

- 简单工厂模式（根据传入type判断创建不同的产品，也可以用反射实现，或者在map中不添加类而是直接添加实例）
- 工厂方法模式（简单工厂变成了抽象工厂，创建对象的任务被分发给了子工厂。抽象工厂只提供创建产品的抽象方法）
- 抽象工厂模式（工厂方法模式的延伸，违反ocp开闭原则，工厂可以生产多个类的产品，原来的工厂方法模式只能生产一个类的产品）





## 来源，链接

来自敖丙

https://mp.weixin.qq.com/s/j42vn-A_rdWZP3aixXB8Ag